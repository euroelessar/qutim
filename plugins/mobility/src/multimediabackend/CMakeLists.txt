#qutim_check_component(MultimediaKit)

if(NOT QT_MOBILITY_MULTIMEDIAKIT_FOUND)
	find_package(Qt4 COMPONENTS QtMultimedia)
	if(NOT QT_QTMULTIMEDIA_FOUND)
		message(STATUS "Cannot build multimedia backend")
		return()
	endif()
	set(QT_MOBILITY_MULTIMEDIAKIT_INCLUDE_DIR ${QT_QTMULTIMEDIA_INCLUDE_DIR})
	set(QT_MOBILITY_MULTIMEDIAKIT_LIBRARY ${QT_QTMULTIMEDIA_LIBRARY})
endif()


qutim_add_plugin(multimediabackend
	EXTENSION
	EXTENSION_HEADER ${CMAKE_CURRENT_SOURCE_DIR}/multimediasoundbackend.h
	EXTENSION_CLASS Core::MultimediaSoundBackend
	LINK_LIBRARIES ${QT_MOBILITY_MULTIMEDIAKIT_LIBRARY}
	SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR}
	DISPLAY_NAME "Multimedia engine"
	DESCRIPTION "Sound engine based on QtMultimedia"
	INCLUDE_DIRS ${QT_MOBILITY_MULTIMEDIAKIT_INCLUDE_DIR}
)
