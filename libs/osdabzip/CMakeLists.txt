#osdab lib
PROJECT (osdabzip)

# with -fPIC
IF(UNIX AND NOT WIN32)
  FIND_PROGRAM(CMAKE_UNAME uname /bin /usr/bin /usr/local/bin )
  IF(CMAKE_UNAME)
    EXEC_PROGRAM(uname ARGS -m OUTPUT_VARIABLE CMAKE_SYSTEM_PROCESSOR)
    SET(CMAKE_SYSTEM_PROCESSOR ${CMAKE_SYSTEM_PROCESSOR} CACHE INTERNAL
"processor type (i386 and x86_64)")
    IF(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64")
      ADD_DEFINITIONS(-fPIC)
    ENDIF(CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64")
  ENDIF(CMAKE_UNAME)
ENDIF(UNIX AND NOT WIN32)

SET (OSDAB_SOURCES
	zip.cpp
	unzip.cpp
)

ADD_LIBRARY (osdabzip STATIC ${OSDAB_SOURCES})

TARGET_LINK_LIBRARIES (osdabzip
        ${QT_LIBRARIES}
        ${OSDABZIP_LIBS}
        )

INSTALL (TARGETS osdabzip DESTINATION lib/qutim/plugman )